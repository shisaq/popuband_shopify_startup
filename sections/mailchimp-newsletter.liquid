{% if section.settings.enable or template contains 'password' %}
  <div class="module-container {% unless template contains 'password' %}{{ section.settings.style }}{% endunless %}">

    <div class="module-inner">
      {% unless template contains 'password' %}
        {% if section.settings.title != blank %}
          <h3 class="section-title">{{ section.settings.title | escape }}</h3>
        {% endif %}

        {% if section.settings.caption != blank %}
          <div class="newsletter-message">
            {{ section.settings.caption }}
          </div>
        {% endif %}
      {% endunless %}

{% comment %}      {% form 'customer' %}

        {{ form.errors | default_errors }}

        {% if form.posted_successfully? %}
          <div class="newsletter-message">
            <p>{{ 'general.mailing_list.message' | t }}</p>
          </div>
        {% else %}
          {%- capture tags -%}
            {%- unless template contains 'password' %}
              newsletter
            {%- else -%}
              prospect, password page
            {%- endunless -%}
          {%- endcapture -%}

          <input type="hidden" id="contact_tags" name="contact[tags]" value="{{ tags | strip }}">

          <input
            class="input-field inline-field-input"
            name="contact[email]"
            type="email"
            placeholder="{{ 'general.general.email_placeholder' | t }}">

          <input
              class="inline-field-submit button secondary"
              name="subscribe"
              type="submit"
              value="{{ 'general.general.subscribe' | t }}">
        {% endif %}

      {% endform %}{% endcomment %}

      <form action="//popuband.us15.list-manage.com/subscribe/post?u=efa736a1b423705d805813b09&amp;id=3d1a165e31" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">

          <input type="email" value="" name="EMAIL" class="input-field inline-field-input" id="mce-EMAIL" placeholder="{{ 'general.general.email_placeholder' | t }}" required>
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="inline-field-submit button">
          <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_efa736a1b423705d805813b09_3d1a165e31" tabindex="-1" value=""></div>
        </div>
      </form>

    </div>

  </div>
{% endif %}

{% schema %}
{
  "name": "Newsletter",
  "class": "newsletter-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable",
      "label": "Show newsletter sign-up in footer"
    },
    {
      "type": "select",
      "id": "style",
      "label": "Style",
      "options": [
        {
          "value": "default-style",
          "label": "Default"
        },
        {
          "value": "accent-style",
          "label": "Accent"
        },
        {
          "value": "contrast-style",
          "label": "Contrast"
        }
      ],
      "default": "default-style"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "caption",
      "label": "Text"
    }
  ]
}
{% endschema %}
